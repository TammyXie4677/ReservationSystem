@model RestaurantReservationSystem.ViewModels.RegisterViewModel

<h2 class="text-center my-4">Register</h2>

<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <form asp-action="Register" method="post" class="p-4 border rounded shadow-sm bg-light">
                @if (ViewData["EmailExists"] != null)
                {
                    <div class="alert alert-danger" role="alert">
                        @ViewData["EmailExists"]
                    </div>
                }

                <!-- Email -->
                <div class="mb-3">
                    <label asp-for="Email" class="form-label"></label>
                    <input asp-for="Email" class="form-control" />
                    <span asp-validation-for="Email" class="text-danger"></span>
                </div>

                <!-- Password -->
                <div class="mb-3">
                    <label asp-for="Password" class="form-label"></label>
                    <input asp-for="Password" type="password" class="form-control" />
                    <span asp-validation-for="Password" class="text-danger"></span>
                </div>

                <!-- Confirm Password -->
                <div class="mb-3">
                    <label asp-for="ConfirmPassword" class="form-label"></label>
                    <input asp-for="ConfirmPassword" type="password" class="form-control" />
                    <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
                </div>

                <!-- First Name -->
                <div class="mb-3">
                    <label asp-for="FirstName" class="form-label"></label>
                    <input asp-for="FirstName" class="form-control" />
                    <span asp-validation-for="FirstName" class="text-danger"></span>
                </div>

                <!-- Last Name -->
                <div class="mb-3">
                    <label asp-for="LastName" class="form-label"></label>
                    <input asp-for="LastName" class="form-control" />
                    <span asp-validation-for="LastName" class="text-danger"></span>
                </div>

                <!-- Phone Number -->
                <div class="mb-3">
                    <label asp-for="PhoneNumber" class="form-label"></label>
                    <input asp-for="PhoneNumber" class="form-control" id="PhoneNumber" />
                    <span asp-validation-for="PhoneNumber" class="text-danger"></span>
                    <span id="phone-error" class="text-danger"></span>
                </div>

                <!-- Submit Button -->
                <div class="d-grid">
                    <button type="submit" class="btn btn-primary">Register</button>
                </div>
            </form>

            <!-- Login option -->
            <p class="text-center mt-3">
                Already have an account? <a asp-action="Login" asp-controller="User" class="text-decoration-none">Login
                    here</a>.
            </p>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        // Function to validate phone number with format xxx-xxx-xxxx
        function validatePhoneNumber() {
            const phoneInput = document.getElementById("PhoneNumber");
            const phoneError = document.getElementById("phone-error");
            const phoneRegex = /^\d{3}-\d{3}-\d{4}$/; // Regex for the xxx-xxx-xxxx format

            // Check if the phone number matches the required format
            if (!phoneRegex.test(phoneInput.value)) {
                phoneError.textContent = "Phone number must be in the format xxx-xxx-xxxx.";
                phoneInput.classList.add("is-invalid");
            } else {
                phoneError.textContent = "";
                phoneInput.classList.remove("is-invalid");
            }
        }

        // Attach the event listener for input changes
        document.getElementById("PhoneNumber").addEventListener("input", validatePhoneNumber);
    </script>
}
